{% extends "base.html" %}
{% load static %}

{% block content %}
<!DOCTYPE html>
  <html>
  <head>
      <title>{% block title %}{% endblock %}</title>
      <link rel="stylesheet" href="{% static "css/style.css" %}" />
      <link rel="stylesheet" href="{% static "css/registration.css" %}" />
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
  </head>
  <body>
              <h1 class="auth">Log in</h1>
              {% if form.errors %}
              <p class="hint">Your username and password didn't match. Please try again.</p>
              {% endif %}

              {% if next %}
              {% if user.is_authenticated %}
              <p class="hint">Your account doesn't have access to this page. To proceed,
                  please login with an account that has access.</p>
              {% else %}
              <p class="hint">Please login to see this page.</p>
              {% endif %}
              {% endif %}

              <form class="form" method="post" action="{% url 'login' %}">
                  {% csrf_token %}

                  <div class="input-field">
                      <label class="input-label" for="username">E-mail</label>
                      <input class="input-form" type="text" id="id_username" name="username" placeholder="Enter your e-mail"
                             required>
                  </div>

                  <div class="input-field">
                      <div class="input-label">
                          <label for="password">Password</label>
                          <a class="forgot-password-link" href="{% url 'password_reset' %}">Forgot password?</a>
                      </div>
                      <input class="input-form" type="password" id="id_password" name="password" placeholder="Enter password"
                             required>
                      <i class="bi bi-eye-slash eye-password" id="togglePassword"></i>
                  </div>

                  <div class="submit-form">
                      <div>
                          <input class="custom-checkbox" type="checkbox" id="rememberme">
                          <label for="rememberme">Remember me</label>
                      </div>

                      <input class="login-button" type="submit" value="Log in">
                      <input type="hidden" name="next" value="{{ next }}">
                  </div>
              </form>
  {% endblock %}

  <script>
      const togglePassword = document.querySelector("#togglePassword");
      const password = document.querySelector("#id_password");

      togglePassword.addEventListener("click", function () {
          const type = password.getAttribute("type") === "password" ? "text" : "password";
          password.setAttribute("type", type);
          this.classList.toggle("bi-eye");
      });
  </script>
  </body>
  </html>
